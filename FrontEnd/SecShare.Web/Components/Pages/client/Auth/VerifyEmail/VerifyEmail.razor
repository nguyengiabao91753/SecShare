@page "/verify-otp"
@rendermode InteractiveServer
@using SecShare.Core.Dtos
@using System.ComponentModel.DataAnnotations
@inject NavigationManager Navigation
@layout SecShare.Web.Components.Layout.EmptyLayout
@inject NavigationManager Navigation

<div class="d-flex flex-column justify-content-center align-items-center min-vh-100" style="background: linear-gradient(135deg, #4b6cb7, #182848);">
    <div class="card shadow p-4 text-center" style="max-width: 400px; width: 100%;">
        <div class="mb-4">
            <i class="fas fa-envelope fa-3x text-primary mb-3"></i>
            <h4 class="text-primary font-weight-bold">Email Verification</h4>
        </div>

        <p class="text-muted mb-4">
            A verification code has been sent to your email
             <strong>@MaskedEmail</strong><br /> 
            Please enter the OTP below to verify your account.
        </p>

        @if (!string.IsNullOrEmpty(infoMessage))
        {
            <div class="alert alert-info py-2">@infoMessage</div>
        }

        @if (!string.IsNullOrEmpty(errorMessage))
        {
            <div class="alert alert-danger py-2">@errorMessage</div>
        }

         <div class="form-group">
             <input type="text" maxlength="6" class="form-control text-center" placeholder="Enter 6-digit OTP" @bind="otpCode" /> 
         </div> 

         <div class="d-flex justify-content-between align-items-center mt-3">
            <button class="btn btn-outline-secondary w-50 me-2"
                    @onclick="ResendOTP"
                    disabled="@isResending || resendCountdown > 0">
                @if (resendCountdown > 0)
                {
                    <span><i class="fas fa-clock me-1"></i> Resend in @resendCountdown s</span>
                }
                else
                {
                    <span><i class="fas fa-redo me-1"></i> Resend OTP</span>
                }
            </button>

            <button class="btn btn-primary w-50"
                    @onclick="VerifyOTP"
                    disabled="@string.IsNullOrEmpty(otpCode)">
                <i class="fas fa-check-circle me-1"></i> Verify
            </button>
         </div> 
    </div>
</div>
